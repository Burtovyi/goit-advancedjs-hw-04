{"version":3,"file":"commonHelpers.js","sources":["../src/index.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport axios from 'axios';\nconst API_KEY = '36838711-56df4c2f8a3a85471ff3834b0';\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nloadMoreBtn.style.display = 'none';\n\nasync function fetchImages() {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\n\n  try {\n    const response = await axios.get(url);\n    const images = response.data.hits;\n    totalHits = response.data.totalHits;\n\n    if (images.length === 0) {\n      iziToast.info({\n        title: 'Hello',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n      });\n      loadMoreBtn.style.display = 'none';\n    } else {\n      appendImages(images);\n      if (totalHits <= page * 40) {\n        loadMoreBtn.style.display = 'none';\n\n        iziToast.info({\n          title: 'Hello',\n          message: 'We`re sorry, but you`ve reached the end of search results.',\n        });\n      } else {\n        loadMoreBtn.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching data.',\n    });\n  }\n  page += 1;\n}\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  searchQuery = event.currentTarget.elements.searchQuery.value;\n  loadMoreBtn.style.display = 'none';\n  if (!searchQuery.trim()) {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a search query.',\n    });\n\n    return;\n  }\n\n  gallery.innerHTML = '';\n  page = 1;\n  fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', fetchImages);\n\nfunction appendImages(images) {\n  const markup = images\n    .map(\n      image => `\n    <div class=\"photo-card\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes:</b> <br>${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views:</b> <br>${image.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments:</b> <br>${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads:</b> <br>${image.downloads}\n        </p>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["API_KEY","searchForm","gallery","loadMoreBtn","searchQuery","page","totalHits","fetchImages","url","response","axios","images","iziToast","appendImages","event","markup","image"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAAc,GACdC,EAAO,EACPC,EAAY,EAEhBH,EAAY,MAAM,QAAU,OAE5B,eAAeI,GAAc,CAC3B,MAAMC,EAAM,gCAAgCR,OAAaI,8EAAwFC,IAEjJ,GAAI,CACF,MAAMI,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAC9BG,EAASF,EAAS,KAAK,KAC7BH,EAAYG,EAAS,KAAK,UAEtBE,EAAO,SAAW,GACpBC,EAAS,KAAK,CACZ,MAAO,QACP,QACE,0EACV,CAAO,EACDT,EAAY,MAAM,QAAU,SAE5BU,EAAaF,CAAM,EACfL,GAAaD,EAAO,IACtBF,EAAY,MAAM,QAAU,OAE5BS,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,4DACnB,CAAS,GAEDT,EAAY,MAAM,QAAU,QAGjC,MAAC,CACAS,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wCACf,CAAK,CACF,CACDP,GAAQ,CACV,CAEAJ,EAAW,iBAAiB,SAAUa,GAAS,CAI7C,GAHAA,EAAM,eAAc,EACpBV,EAAcU,EAAM,cAAc,SAAS,YAAY,MACvDX,EAAY,MAAM,QAAU,OACxB,CAACC,EAAY,OAAQ,CACvBQ,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,EAED,MACD,CAEDV,EAAQ,UAAY,GACpBG,EAAO,EACPE,GACF,CAAC,EAEDJ,EAAY,iBAAiB,QAASI,CAAW,EAEjD,SAASM,EAAaF,EAAQ,CAC5B,MAAMI,EAASJ,EACZ,IACCK,GAAS;AAAA;AAAA,kBAEGA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA,8BAGtBA,EAAM;AAAA;AAAA;AAAA,8BAGNA,EAAM;AAAA;AAAA;AAAA,iCAGHA,EAAM;AAAA;AAAA;AAAA,kCAGLA,EAAM;AAAA;AAAA;AAAA;AAAA,GAKnC,EACA,KAAK,EAAE,EACVd,EAAQ,mBAAmB,YAAaa,CAAM,CAChD"}